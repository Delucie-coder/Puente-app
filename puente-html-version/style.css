:root {
  /* Dark green aesthetic palette */
  --bg: linear-gradient(180deg,#0b2b20 0%, #09321f 100%);
  --page-bg-color: #082916; /* fallback solid */
  /* canvas and accents tuned to the provided screenshot */
  --canvas-bg-top: #2f4ea1; /* deep blue */
  --canvas-bg-bottom: #3b57a9; /* lighter blue */
  --canvas-card: #ffffff; /* white canvas */
  --icon-default: #24303A; /* default icon stroke */
  --icon-vendor: #b76a3b;
  --icon-moto: #0aa39a;
  --focus-ring: rgba(37,99,235,0.16);
  --card:#0f2f24;
  --text:#e6f6ef;
  --muted:#9fbfaa;
  --brand:#067f4a;
  --brand-2:#0aa36a;
  --line:rgba(255,255,255,0.06);
  --good:#34d399;
  --warn:#f59e0b;
  --bad:#fb6970;
  --shadow:0 8px 24px rgba(2,6,23,.6);
  --radius:14px;
  /* slightly-off black for headings (so it's not pure #000) */
  --heading-black: #071019;
}

* { box-sizing:border-box; margin:0; padding:0; font-family:Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif; }

body { background:var(--page-bg-color); background-image:var(--bg); color:var(--text); min-height:100vh; }

/* Student Dashboard (light, warm theme override) */
.student-dashboard { background: #faf6f2; color: #3b2b22; }
.student-dashboard .topbar { background: transparent; box-shadow:none; border-radius:0; padding:18px 0; }
.student-dashboard .brand-title { color:#5b3927 }
.student-dashboard .tag { color:#8b6f5e }
.student-dashboard .hero { padding:36px 8px 12px; text-align:center; }
.student-dashboard .hero h1{ font-size:40px; color:#5b3927; margin:6px 0 10px; font-weight:800; letter-spacing:-0.4px }
.student-dashboard .hero-sub{ display:flex; justify-content:space-between; align-items:center; gap:12px; max-width:1100px; margin:0 auto; padding-top:8px }
.student-dashboard .hero-left{ text-align:left }
.student-dashboard .section-title{ font-size:24px; color:#5b3927; margin:0 0 6px }
.student-dashboard .view-more{ font-size:14px; color:#8b6f5e }
.student-dashboard .hero-right{ text-align:right }
.student-dashboard .search-wrap{ display:flex; gap:8px; align-items:center }
.student-dashboard .search-input{ padding:10px 12px; border-radius:6px; border:1px solid #e6dad0; width:260px; background:white; color:#3b2b22 }
.student-dashboard .card{ background:white; color:#3b2b22; border:1px solid #efe7e3 }
.student-dashboard .lesson-card{ box-shadow:none; border-radius:10px }
.student-dashboard .muted{ color:#8b6f5e }
.student-dashboard .btn { background:transparent; border:1px solid rgba(0,0,0,0.04) }
.student-dashboard .btn-primary{ background:#b76a3b }
.student-dashboard .logo-circle{ background:transparent }
.student-dashboard .logo-img{ filter: none }

/* More refined warm styling for hero, cards and program grid */
.student-dashboard .hero{ background: linear-gradient(180deg, #fffaf6 0%, #fbf6f2 100%); border-radius:12px; padding:28px; box-shadow: 0 8px 30px rgba(91,57,39,0.06); border:1px solid rgba(91,57,39,0.04); }
.student-dashboard .card{ box-shadow: 0 10px 28px rgba(91,57,39,0.04); border-radius:12px }
.student-dashboard .section-title{ font-weight:700 }
.student-dashboard .search-wrap .icon-btn{ background:#fff; border:1px solid #efe7e3; color:#8b6f5e }

/* Program week tiles tuned for the light/warm aesthetic */
.student-dashboard .program-week-grid { grid-template-columns: repeat(4, 1fr); gap:14px; }
.student-dashboard .program-week-tile{ background: #fffaf6; border:1px solid #f2e6de; padding:14px; border-radius:12px; box-shadow: 0 6px 18px rgba(91,57,39,0.04); color:#5b3927 }
.student-dashboard .program-week-tile .program-week-number{ font-size:13px; color:#a07a66; font-weight:700 }
.student-dashboard .program-week-tile .program-week-title{ color:#4b3226; font-size:13px; min-height:36px }
.student-dashboard .program-week-tile .program-week-score{ color:#6b4a3a; font-weight:700 }
.student-dashboard .program-week-tile:hover{ transform:translateY(-4px); box-shadow:0 12px 30px rgba(91,57,39,0.08) }
.student-dashboard .program-week-tile.done{ border-color: rgba(183,106,59,0.18); box-shadow:0 12px 30px rgba(183,106,59,0.06) }
.student-dashboard .program-week-tick{ top:12px; right:12px; width:28px; height:28px; font-size:13px }
.student-dashboard .program-week-tick.done{ background:#b76a3b; color:#fff }
.student-dashboard .program-week-tick.pending{ background:#fff; color:#b0765f; border:1px solid #f0e6e0 }
.student-dashboard .program-week-progress > i { background: linear-gradient(90deg, #f0c7a0, #c78b5b); }

/* Pass-threshold badge for student-dashboard (so it's readable on cream background) */
.student-dashboard .threshold-source{ border:1px solid #efe3db; background: #fff; color:#8b6f5e }

/* New canvas layout to mimic the reference student dashboard */
.student-dashboard{ background: linear-gradient(180deg,var(--canvas-bg-top) 0%, var(--canvas-bg-bottom) 100%); }
.student-dashboard .dashboard-grid{ display:flex; justify-content:center; padding:36px 20px; }
.student-dashboard .canvas{ width:100%; max-width:1100px; background: #ffffff; border-radius:18px; padding:20px; box-shadow: 0 30px 60px rgba(17,24,39,0.25); display:flex; gap:20px; align-items:flex-start }
.student-dashboard .dash-main{ flex:1; background:transparent; padding:0; }
.student-dashboard .dash-sidebar{ width:300px; background:transparent; padding:0 }

/* Left vertical sidebar mimic */
.student-dashboard .sidebar{ display:none; }
.student-dashboard .dash-main .profile-section{ margin-bottom:14px }

/* Style internal cards to sit on the white canvas like the reference */
.student-dashboard .card{ background:transparent; border:none; box-shadow:none; color:#3b2b22; padding:0 }
.student-dashboard .card > h3{ color:#3b2b22 }

/* Re-style internal content blocks so they look like panels on the white canvas */
.panel { background: #ffffff; border-radius:12px; padding:14px; box-shadow: 0 8px 24px rgba(34,41,56,0.06); border:1px solid #eef2f6 }

/* Adjust calendar and grades sidebar cards */
.student-dashboard .calendar-card, .student-dashboard .grades-card { background:#f8fafc; border-radius:10px; padding:12px; box-shadow:none; border:1px solid #eef2f6 }

/* Top search bar style inside canvas */
.student-dashboard .topbar{ background:transparent; border:none; padding:0; margin-bottom:8px }

/* Make lessons list appear as compact cards inside the canvas */
.student-dashboard .card-grid .card{ background:#ffffff; border:1px solid #f1f5f9; padding:12px; border-radius:10px }

/* Small screens: collapse canvas layout */
@media (max-width:900px){ .student-dashboard .canvas{ flex-direction:column; padding:12px } .student-dashboard .dash-sidebar{ width:100%; } .student-dashboard .program-week-grid { grid-template-columns: repeat(3, 1fr); } }

/* Left icon rail */
.student-dashboard .left-rail{ width:72px; display:flex; flex-direction:column; gap:12px; align-items:center; padding:18px 8px; background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); border-radius:12px; }
.student-dashboard .left-rail .rail-btn{ width:52px; height:52px; border-radius:12px; display:grid; place-items:center; border:none; background:#f6f7fb; cursor:pointer; font-size:18px; padding:6px; transition:transform .14s ease, box-shadow .14s ease, background .12s ease }
.student-dashboard .left-rail .rail-btn:hover{ transform:translateY(-4px); box-shadow:0 10px 24px rgba(17,24,39,0.06) }

/* Icon sizing and theming: allow the svg symbols to inherit color via currentColor */
.student-dashboard .left-rail .rail-btn .icon{ width:20px; height:20px; display:block; color:var(--icon-default) }
.student-dashboard .left-rail .rail-btn .icon use{ color:inherit }

/* Improve hit target and keyboard focus styles */
.student-dashboard .left-rail .rail-btn:focus{ outline:none }
.student-dashboard .left-rail .rail-btn:focus-visible{ box-shadow: 0 0 0 4px var(--focus-ring); border-radius:12px }
.student-dashboard .left-rail .rail-btn:active{ transform:translateY(0) }

/* Hover / active color accent depending on role */
.student-dashboard .left-rail .rail-btn:hover .icon{ color:var(--icon-default) }
.student-dashboard.vendor .left-rail .rail-btn:hover .icon{ color:var(--icon-vendor) }
.student-dashboard.moto .left-rail .rail-btn:hover .icon{ color:var(--icon-moto) }

/* pressed/active rail button state */
.student-dashboard .left-rail .rail-btn[aria-pressed="true"]{ background: linear-gradient(180deg, rgba(255,255,255,0.98), rgba(255,255,255,0.96)); box-shadow:0 10px 26px rgba(17,24,39,0.08) }
.student-dashboard .left-rail .rail-btn[aria-pressed="true"] .icon{ color:var(--icon-default) }
.student-dashboard.vendor .left-rail .rail-btn[aria-pressed="true"] .icon{ color:var(--icon-vendor) }
.student-dashboard.moto .left-rail .rail-btn[aria-pressed="true"] .icon{ color:var(--icon-moto) }

/* KPI row in hero */
.kpi-row{ display:flex; gap:12px; justify-content:flex-start; margin-top:14px }
.kpi{ width:120px; text-align:center; padding:10px; border-radius:10px; border:1px solid #f1f5f9; background:#fff }
.kpi-value{ font-size:20px; font-weight:800; color:#2b3a42 }
.kpi-label{ font-size:12px; color:#7b8b8f }

/* Role-specific accents for left-rail and KPI highlights */
.student-dashboard.vendor .left-rail .rail-btn{ background: #fff7f1 }
.student-dashboard.vendor .kpi-value{ color:#b76a3b }
.student-dashboard.moto .left-rail .rail-btn{ background: #f1fbfa }
.student-dashboard.moto .kpi-value{ color:#0aa39a }

@media (max-width:700px){ .student-dashboard .left-rail{ width:100%; flex-direction:row; justify-content:flex-start; padding:8px } .student-dashboard .left-rail .rail-btn{ width:40px;height:40px;border-radius:8px } .kpi-row{ justify-content:space-between } }

/* Role specific tweaks */
.student-dashboard.vendor { background: linear-gradient(180deg,#2f4ea1 0%, #3b57a9 100%); }
.student-dashboard.vendor .program-week-tile.done { box-shadow: 0 12px 30px rgba(183,106,59,0.10); }
.student-dashboard.vendor .btn-primary { background:#c4632f }

.student-dashboard.moto { background: linear-gradient(180deg,#15616d 0%, #1f8a8b 100%); }
.student-dashboard.moto .program-week-tile.done { box-shadow: 0 12px 30px rgba(16,185,129,0.10); }
.student-dashboard.moto .btn-primary { background:#0aa39a }

/* Make sure vendor/moto class styling applies when body has them */
/* body role classes are used on <body> for high-level theme switching */

/* Responsive tweaks for hero */
@media (max-width:900px){ .student-dashboard .hero-sub{ flex-direction:column; align-items:stretch } .student-dashboard .hero-right { text-align:left } .student-dashboard .search-input{ width:100%; } }

/* ---------- Auth ---------- */
.auth-body { min-height:100vh; display:grid; place-items:center; padding:24px; }
.auth-card {
  width:100%; max-width:440px; background:var(--card); border-radius:var(--radius);
  box-shadow:var(--shadow); padding:28px;
}
.brand { display:flex; align-items:center; gap:14px; margin-bottom:12px; }
.logo-circle {
  inline-size:48px; block-size:48px; border-radius:50%; display:grid; place-items:center;
  background:linear-gradient(135deg,var(--brand),var(--brand-2)); color:white; font-weight:700;
  letter-spacing:.5px; box-shadow:var(--shadow); font-size:18px;
}

/* logo image inside the circular brand */
.logo-circle .logo-img{
  width:40px;
  height:40px;
  border-radius:50%;
  object-fit:cover;
  display:block;
}
.brand-text h1 { font-size:24px; margin:0; }
.brand-text p { color:var(--muted); font-size:13px; }
.auth-form { display:flex; flex-direction:column; gap:14px; margin-top:18px; }
.form-group { display:flex; flex-direction:column; gap:8px; }
input,select {
  padding:12px 14px; border:1px solid var(--line); border-radius:12px; background:#fff;
}
input:focus,select:focus {
  border-color:var(--brand); box-shadow:0 0 0 3px rgba(37,99,235,.15);
}
.btn-primary {
  padding:12px 16px; border:none; border-radius:12px; background:var(--brand); color:#fff;
  font-weight:700; cursor:pointer; transition:.2s;
}
.btn-primary:hover { background:var(--brand-2); }
.muted { color:var(--muted); font-size:12px; text-align:center; }

/* ---------- Dashboard Layout ---------- */
.container { display:flex; min-height:100vh; }
.sidebar {
  width:260px; background:#0b1220; color:#e5e7eb; display:flex; flex-direction:column;
  padding:22px 16px; gap:18px;
}
.sidebar .brand-row { display:flex; align-items:center; gap:10px; }
.nav a {
  display:block; padding:12px; border-radius:10px; color:#cfd8e3; text-decoration:none;
}
.nav a.active, .nav a:hover { background:#101827; color:#fff; }
.main { flex:1; padding:22px; display:flex; flex-direction:column; gap:18px; }
.topbar {
  background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));
  border-radius:12px; box-shadow:var(--shadow);
  display:flex; justify-content:space-between; align-items:center; padding:12px 18px;
}
.user-chip { display:flex; align-items:center; gap:10px; }
.user-badge { background:#eef2ff; color:#3730a3; font-size:12px; border-radius:999px; padding:6px 10px; }
.grid { display:grid; gap:16px; grid-template-columns:repeat(12,minmax(0,1fr)); }
.card {
  background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));
  border-radius:12px; box-shadow:var(--shadow); padding:18px; color:var(--text);
}
.card h3 { margin-bottom:8px; }
.stat { font-size:28px; font-weight:800; }
.kpi.good { color:var(--good); } .kpi.warn { color:var(--warn); } .kpi.bad { color:var(--bad); }
.table { width:100%; border-collapse:collapse; }
.table th, .table td { padding:12px; border-bottom:1px solid var(--line); text-align:left; }
.table th { color:var(--muted); font-size:12px; text-transform:uppercase; }
.actions { display:flex; gap:8px; }
.btn { padding:8px 12px; border-radius:10px; border:1px solid rgba(255,255,255,0.04); background:transparent; cursor:pointer; color:var(--text); }
.btn.approve { background: rgba(52,211,153,0.08); color:var(--good); border-color: rgba(52,211,153,0.12); }
.btn.reject { background: rgba(251,105,112,0.06); color:var(--bad); border-color: rgba(251,105,112,0.08); }

/* Slightly larger tap targets and nicer hover states */
.btn { padding:10px 14px; font-weight:600; transition:transform .12s ease, background .12s ease, box-shadow .12s ease }
.btn:hover { transform:translateY(-2px); box-shadow:0 8px 18px rgba(0,0,0,0.06) }
.btn:active { transform:translateY(0) }

.btn-primary { background:#b76a3b; color:#fff; border:none }
.btn-primary:hover { background:#c17a4a }

/* Muted text variation for light theme */
.student-dashboard .muted { color:#9b8777 }

/* Lesson/resource cards slight padding increase */
.lesson-card { padding:14px }

/* Make program-week grid more flexible and readable on desktop */
.program-week-grid { grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap:14px; }
.program-week-tile { min-height:110px; display:flex; flex-direction:column; justify-content:space-between }
.program-week-number{ text-transform:uppercase; font-size:12px }

/* Small screens: make tiles more compact */
@media (max-width:520px){ .student-dashboard .program-week-grid { grid-template-columns: repeat(2, 1fr); } }

/* Visual cue when a search is performed from the hero input */
.search-highlight { outline: 3px solid rgba(183,106,59,0.12); box-shadow: 0 14px 40px rgba(183,106,59,0.06); transform: translateY(-4px); transition: box-shadow .28s ease, transform .18s ease, outline .18s ease; border-radius:10px }

/* Small utility grid for cards */
.card-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:14px}

/* Week schedule grid for lessons */
.week-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:8px}
.week-grid .btn{width:100%;text-align:center;padding:10px 12px;border-radius:12px}

/* Muted text */
.muted { color:var(--muted); }

/* Layout helpers */
.content-wrapper{max-width:1100px;margin:2rem auto;padding:1rem}
.flex-1{flex:1}
.ml-2{margin-left:.5rem}
.role-section{margin-top:0.8rem}

.flex-row{display:flex;align-items:center;gap:.5rem}
.role-select{margin-left:.5rem;padding:.35rem;border-radius:6px;border:1px solid var(--line);}
.profile-name{font-weight:700}
.profile-email{color:var(--muted);font-size:0.95rem}

/* Profile card styling: single prominent circular image */
.profile-card{display:flex;gap:14px;align-items:center;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));padding:12px;border-radius:12px;box-shadow:0 8px 24px rgba(0,0,0,0.6);}
.profile-card img{width:112px;height:112px;border-radius:50%;object-fit:cover;border:3px solid rgba(255,255,255,0.06);box-shadow:0 10px 30px rgba(0,0,0,0.6)}
.brand-title{font-weight:800;font-size:16px}
.tag{color:var(--muted);font-size:12px}

/* Video/lesson helpers */
.video-player{width:100%;max-height:320px;border-radius:8px}
.video-placeholder{background:linear-gradient(90deg, rgba(0,0,0,0.2), rgba(255,255,255,0.02)); color:var(--muted); height:220px;border-radius:8px;display:flex;align-items:center;justify-content:center}
.exercise-card{padding:.6rem;margin-bottom:.5rem}
.option-label{display:block}
.mt-1{margin-top:1.25rem}

/* Lesson card small utilities */
.lesson-card { padding:12px; }
.lesson-title { margin:0 0 6px 0; font-size:15px }
.lesson-summary { margin:0 0 10px 0; color:var(--muted); font-size:0.95rem }

/* Table utilities */
.text-right { text-align:right }
.td-tight { max-width:160px; overflow:hidden; text-overflow:ellipsis; white-space:nowrap }

/* Upcoming list */
.upcoming-item{display:flex;gap:8px;align-items:center;padding:8px 0;border-bottom:1px dashed var(--line)}
.upcoming-title{flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}
.upcoming-date{white-space:nowrap;color:var(--muted);font-size:0.95rem}

/* Calendar widget styles */
.calendar-widget{display:flex;flex-direction:column;gap:10px}
.calendar-header{display:flex;justify-content:space-between;align-items:center}
.calendar-nav{display:flex;gap:8px;align-items:center}
.calendar-nav button{background:transparent;border:none;color:var(--muted);cursor:pointer;padding:6px;border-radius:8px}
.calendar-grid{display:grid;grid-template-columns:repeat(7,1fr);gap:6px;font-size:0.85rem}
.calendar-grid .day{min-height:44px;padding:8px;border-radius:8px;text-align:right;background:transparent;color:var(--text);position:relative;border:1px solid transparent}
.calendar-grid .day.header{font-weight:700;color:var(--muted);background:transparent;border:none;text-align:center}
.calendar-grid .day.today{box-shadow:0 6px 18px rgba(2,6,23,0.08);border:1px solid rgba(255,255,255,0.04)}
.calendar-grid .day .dot{position:absolute;left:8px;top:8px;width:8px;height:8px;border-radius:50%;background:var(--brand);}
.calendar-grid .day.has-deadline{background:linear-gradient(180deg,rgba(6,150,90,0.06),transparent);border:1px solid rgba(6,150,90,0.09)}
.calendar-grid .day .count{position:absolute;left:8px;bottom:6px;font-size:11px;color:var(--muted)}
.calendar-legend{display:flex;gap:8px;align-items:center;font-size:12px;color:var(--muted)}
.calendar-legend .item{display:flex;gap:6px;align-items:center}
.calendar-legend .swatch{width:10px;height:10px;border-radius:3px;background:var(--brand)}

/* Popover for calendar day details */
.popover-card{position:absolute;z-index:1200;min-width:260px;max-width:360px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:10px;box-shadow:0 12px 40px rgba(2,6,23,0.6);padding:12px;color:var(--text)}
.popover-card header{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}
.popover-card .close-btn{background:transparent;border:none;color:var(--muted);cursor:pointer}
.popover-card .assign-list{max-height:260px;overflow:auto;margin-bottom:8px}
.popover-card .assign-item{padding:8px;border-radius:8px;background:rgba(255,255,255,0.01);margin-bottom:6px;display:flex;justify-content:space-between;align-items:center}
.popover-card .assign-item .meta{color:var(--muted);font-size:12px}
.popover-card .small{font-size:13px;color:var(--muted)}
.popover-card .form-row{display:flex;gap:8px;align-items:center}
.popover-card input[type=date], .popover-card input[type=text]{padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:var(--text)}
.popover-card .btn{padding:6px 8px;border-radius:8px}

/* Modal overlay for centered dialog */
.modal-overlay{position:fixed;inset:0;background:rgba(2,6,23,0.6);display:flex;align-items:center;justify-content:center;z-index:1400;padding:20px}
.modal-card{max-width:720px;width:100%;border-radius:12px;padding:14px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));box-shadow:0 20px 60px rgba(2,6,23,0.7);color:var(--text)}
.modal-card .assign-list{max-height:320px;overflow:auto}
.modal-card header{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}
.modal-card .close-btn{background:transparent;border:none;color:var(--muted);cursor:pointer}

/* Buttons and focus states */
.link-btn{background:none;border:none;color:var(--brand);cursor:pointer;padding:6px 8px;border-radius:8px}
.link-btn:focus, .btn:focus, .btn-primary:focus { outline:3px solid rgba(37,99,235,0.15); outline-offset:2px }
.btn-primary { background:var(--brand); color:#fff; border: none; padding:8px 12px; border-radius:10px }
.btn-primary:hover { background:var(--brand-2) }

/* Icon-only button used for attach (paperclip) */
.icon-btn{width:40px;height:40px;display:inline-grid;place-items:center;border-radius:10px;padding:6px;border:1px solid rgba(255,255,255,0.03);background:transparent;color:var(--muted);cursor:pointer}
.icon-btn svg{width:18px;height:18px;display:block}
.icon-btn .icon{ width:18px; height:18px; display:block; color:var(--icon-default) }
.icon-btn .icon use{ color:inherit }
.icon-btn:hover{background:rgba(255,255,255,0.02);color:var(--text)}
.icon-btn:focus{outline:3px solid rgba(10,163,106,0.18)}

/* Avatar wrapper and edit menu */
.profile-avatar-wrapper{position:relative;display:inline-block}
.profile-edit-btn{position:absolute;right:4px;bottom:4px;background:rgba(0,0,0,0.45);color:var(--text);border:none;width:36px;height:36px;border-radius:50%;display:grid;place-items:center;cursor:pointer;font-size:14px}
.profile-edit-btn:focus{outline:3px solid rgba(10,163,106,0.18)}
.profile-menu{position:absolute;right:0;top:calc(100% + 8px);background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:10px;padding:8px;min-width:160px;box-shadow:var(--shadow);display:none;z-index:60}
.profile-menu.open{display:block}
.profile-menu button{display:block;width:100%;text-align:left;padding:8px;border-radius:8px;background:transparent;border:none;color:var(--text);}
.profile-menu button:hover{background:rgba(255,255,255,0.02)}

/* small animation for menu */
.profile-menu{transform-origin:100% 0;transition:transform .16s ease,opacity .12s ease;opacity:0;transform:scale(.96);}
.profile-menu.open{opacity:1;transform:scale(1)}

/* Toast notifications */
.toast-container{position:fixed;right:18px;top:18px;z-index:9999;display:flex;flex-direction:column;gap:10px}
.toast{min-width:220px;padding:10px 14px;border-radius:10px;color:var(--text);background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));box-shadow:0 8px 30px rgba(0,0,0,0.6);opacity:0;transform:translateY(-6px);transition:opacity .18s ease,transform .18s ease}
.toast.show{opacity:1;transform:translateY(0)}
.toast.success{border-left:4px solid var(--good)}
.toast.warn{border-left:4px solid var(--warn)}
.toast.error{border-left:4px solid var(--bad)}

/* Progress summary card styling */
.progress-summary-card{display:block;padding:12px;border-radius:12px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border:1px solid rgba(255,255,255,0.02);}
.progress-summary-card strong{display:block;margin-bottom:8px}
.progress-summary-card .small{font-size:13px;color:var(--muted)}
.progress-summary-card .stat{font-size:18px;font-weight:700;color:var(--brand)}

/* Week grid for 12-week program */
.program-week-grid {
  display: grid;
  grid-template-columns: repeat(6, 1fr);
  gap: 10px;
  margin-top: 10px;
}
.program-week-tile {
  background: linear-gradient(180deg, rgba(255,255,255,0.01), rgba(0,0,0,0.02));
  border: 1px solid rgba(255,255,255,0.03);
  padding: 10px;
  border-radius: 8px;
  text-align: center;
  cursor: pointer;
  transition: transform .12s ease, box-shadow .12s ease;
  position: relative;
}
.program-week-tile:hover { transform: translateY(-3px); box-shadow: 0 8px 20px rgba(0,0,0,0.08); }
.program-week-tile.done { border-color: var(--good); box-shadow: 0 8px 20px rgba(52,211,153,0.06); }
.program-week-number { font-weight:700; font-size:14px; color:var(--muted); }
.program-week-title { font-size:12px; color:var(--muted); margin-top:6px; min-height:34px; }
.program-week-score { margin-top:8px; font-size:12px; }
.program-week-tick {
  position: absolute; top:8px; right:8px; width:22px; height:22px; border-radius:50%; display:flex; align-items:center; justify-content:center; font-size:12px; color:#fff;
}
.program-week-tick.done { background: var(--good); }
.program-week-tick.pending { background: rgba(255,255,255,0.04); color:var(--muted); }
.program-week-progress { height:8px; background:rgba(255,255,255,0.03); border-radius:6px; overflow:hidden; margin-top:8px; }
.program-week-progress > i { display:block; height:100%; background: linear-gradient(90deg, #6aa84f, #2e8b57); width:0%; }

/* Selected week tile visual */
.program-week-tile.selected { transform: translateY(-6px); box-shadow: 0 18px 40px rgba(2,6,23,0.18); border-color: rgba(10,163,106,0.14); }
.program-week-tile .prog-meta { margin-top:8px; font-size:12px; color:var(--muted); }
.program-week-tile .prog-percent { font-weight:700; color:var(--brand-2); }

/* Tick styling inside tile */
.program-week-tick { width:26px; height:26px; font-size:13px }
.program-week-tick.done { background: var(--good); color:#fff }
.program-week-tick.pending { background: rgba(255,255,255,0.04); color:var(--muted) }

/* weeksSection open animation helper */
#weeksSection.open { opacity:1 !important; transform:translateY(0) !important }

/* smoother tile entrance */
.program-week-tile { transition: transform .18s ease, box-shadow .18s ease, border-color .18s ease, opacity .18s ease; opacity:1 }
.program-week-tile.fade-in { opacity:0; transform: translateY(8px); }

/* Progress bar inside tile */
.program-week-progress { height:8px; background:rgba(255,255,255,0.06); border-radius:6px; overflow:hidden; margin-top:8px; }
.program-week-progress .bar { height:100%; width:0%; background:linear-gradient(90deg,#6aa84f,#2e8b57); transition:width .4s ease; }

/* Focus and aria-selected visuals */
.program-week-tile[tabindex] { outline: none; }
.program-week-tile:focus-visible { box-shadow: 0 18px 40px rgba(2,6,23,0.2); transform: translateY(-6px); border-color: rgba(37,99,235,0.18); }
.program-week-tile[aria-selected="true"] { border-color: rgba(10,163,106,0.18); }

@media (max-width:900px){ .program-week-grid { grid-template-columns: repeat(4, 1fr); } }
@media (max-width:520px){ .program-week-grid { grid-template-columns: repeat(3, 1fr); } }

/* Passing threshold controls in the weekly session */
#passThresholdInput { max-width:70px; background:transparent; color:var(--text); }
#savePassThresholdBtn { padding:6px 8px; }
/* Threshold source badge */
.threshold-source{font-size:12px;color:var(--muted);margin-left:8px;padding:4px 8px;border-radius:8px;background:transparent;border:1px solid rgba(255,255,255,0.02);display:inline-block;vertical-align:middle}
.threshold-source.local{color:#e6f6ef;background:rgba(10,163,106,0.06);border-color:rgba(10,163,106,0.08)}
.threshold-source.server{color:var(--muted);background:transparent}
.threshold-source.default{color:var(--muted);background:transparent}

/* ------------------------------------------------------------------ */
/* Styles that were previously inline in `dashboard.html` (extracted)  */
/* Kept small and local to the prototype page layout (left-rail, canvas) */
/* ------------------------------------------------------------------ */

/* Prototype canvas & left rail (from dashboard.html) */
.app-wrap{min-height:100vh;display:flex;align-items:center;justify-content:center;padding:28px}
.canvas{width:1100px;background:var(--card);border-radius:12px;box-shadow:0 8px 24px rgba(2,6,23,0.15);display:flex;overflow:visible;gap:18px}
.left-rail{width:72px;background:transparent;padding:12px 8px;display:flex;flex-direction:column;gap:8px;align-items:center;border-right:1px solid rgba(0,0,0,0.04)}
.rail-btn{width:48px;height:48px;border-radius:10px;border:0;background:transparent;color:var(--muted);display:grid;place-items:center;cursor:pointer}
.rail-btn.active{background:linear-gradient(180deg,#8b5cf6,#7c3aed);color:#fff;box-shadow:0 8px 24px rgba(124,58,237,0.18);transform:translateY(-2px)}
/* icon color and hover polish */
.rail-btn svg{width:20px;height:20px;color:var(--muted);transition:color .14s ease,transform .12s ease}
.rail-btn:hover svg{color:#6d28d9;transform:translateY(-2px)}
.rail-btn.active svg{color:#fff}
.main-area{flex:1;padding:20px}
.top-row{display:flex;justify-content:space-between;align-items:center}
.kpi-row{display:flex;gap:12px;margin-top:14px}
.kpi{background:#f8fafc;padding:12px;border-radius:8px;flex:1;text-align:center}
.kpi .value{font-size:20px;font-weight:600}
.card{background:#fff;border-radius:8px;padding:12px}
.role-select{padding:6px;border-radius:6px}
#lessonsList{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:12px;margin-top:12px}
.lesson-card{border:1px solid #eef2ff;padding:10px;border-radius:8px}
@media(max-width:1000px){ .canvas{width:100%;flex-direction:column} .left-rail{flex-direction:row;width:100%;border-right:0;border-bottom:1px solid rgba(0,0,0,0.04)} }

/* Right column sizing and simple layout to match the mock */
.right-column{width:300px;padding:0 8px 8px 0;display:flex;flex-direction:column;gap:12px}
.right-column .card{background:#fff;border-radius:12px;padding:12px;color:#072f2a;border:1px solid #eef2f6}
.calendar-card{padding:12px}
.calendar-card .calendar-grid .day{background:transparent;color:#334155;border-radius:8px}
.calendar-card .day.today{background:#6d28d9;color:#fff;border:none;box-shadow:0 8px 24px rgba(109,40,217,0.16)}
.upcoming-card{background:#ffffff}
.notice-board .notice-item .muted{color:#6b7280}

/* popover tweaks (rely on existing .popover-card rules but ensure small default) */
#calendarPopover{max-width:320px;padding:12px}

@media (max-width:1100px){ .canvas{width:100%} .right-column{width:100%} }

/* small helper to ensure muted label matches existing theme variables */
.muted{color:var(--muted)}

/* High-contrast overrides for canvas content to improve readability */
.canvas { color: #0b1220; }
.canvas .card { background: #ffffff; color: #0b1220; }
.canvas .lesson-card { background: #ffffff; color: #0b1220; border-color: #e6eef3 }
.canvas .lesson-title { color: #072f2a; font-size:16px; font-weight:800 }
.canvas .lesson-summary, .canvas .muted { color: #475569; font-size:14px }
.canvas .program-week-tile { background: linear-gradient(180deg,#ffffff,#fbfbfb); color: #0b1220; border:1px solid rgba(15,23,42,0.06); }
.canvas .program-week-title { color: #334155; font-weight:700; font-size:14px }
.canvas .program-week-number { color: #6b7280; font-weight:800; font-size:13px }
.canvas .prog-meta, .canvas .program-week-score, .canvas .prog-percent { color:#334155; font-size:13px }
.canvas .program-week-progress { background: #eef2f7 }
.canvas .program-week-progress .bar { background: linear-gradient(90deg,#16a34a,#059669) }
.canvas a { color: #065f46; text-decoration:underline }
.canvas .kpi { background:#ffffff; color:#0b1220; border:1px solid #eef2f6 }
.canvas .kpi .value { color:#0b1220; font-size:22px; font-weight:800 }

/* Improve contrast for top labels and headings inside canvas */
/* Make all dashboard headings black for maximum contrast */
.student-dashboard .hero h1,
.student-dashboard .canvas h1,
.student-dashboard .canvas h2,
.student-dashboard .canvas h3,
.student-dashboard .canvas h4,
.student-dashboard .canvas h5,
.student-dashboard .canvas h6,
.canvas h1,
.canvas h2,
.canvas h3,
.canvas h4,
.canvas h5,
.canvas h6,
.card > h3 {
  color: var(--heading-black) !important;
  font-weight:800;
}

/* Make the main page title and program weeks title white when shown (for rails 1/2/3) */
.canvas #title, .canvas #weeksTitle { color: #ffffff !important; }

/* Ensure buttons inside canvas have visible text */
.canvas .btn, .canvas .btn-primary, .canvas .link-btn { color: #06201a; font-weight:700 }

/* Ensure week detail text is high contrast */
#weekDetail { color:#072f2a; font-size:15px; line-height:1.45 }

/* Slightly larger base for cards and lesson text to improve legibility */
.card { font-size:14px }

